<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Đăng nhập shop quần áo 160Store.">
        <meta name="keywords" content="đăng nhập 160s, đăng kí 160s">
        <title>Quản Lý Nhân Sự - 160store</title>
        <link rel="icon" type="image" href="logo160s.jpg">
        <link rel="stylesheet" href="style trangchu.css">
    </head>
    <body>
        <!-- Sidebar -->
        <div class="sidebar">
            <div>
                <div class="admin-info">
                    <img src="ảnh đại diện trang chủ..jpg" alt="Admin">
                    <h3>Trần Vũ Phương Thùy</h3>
                    <p>Quản trị viên</p>
                </div>
                <ul>
                    <li><a href="trangchu.html"><i class="home"></i> Trang chủ</a></li>
                    <li><a href="sanpham.html"><i class="box"></i> Sản phẩm</a></li>
                    <li><a href="khachhang.html"><i class="users"></i> Khách hàng</a></li>
                    <li><a href="đăng kí.html"><i class="users"></i> Nhân sự</a></li>
                    <li><a href="thongke.html"><i class="chart-line"></i> Thống kê</a></li>
                   
                </ul>
            </div>
            <div class="logout">
                <a href="đăng nhập.html"><i class="power-off"></i> Đăng xuất</a>
            </div>
        </div>

        <!-- Main content -->
        <main>
            <div class="nhansu-container">
                <h2>Quản Lý Nhân Sự</h2>
                <form id="nhansu-form">
                    <label for="name">Họ và tên</label>
                    <input type="text" id="name" name="name" placeholder="Nhập họ và tên" required>
                    
                    <label for="date">Ngày sinh</label>
                    <input type="date" id="date" name="date" required>
                    
                    <label for="position">Chức vụ</label>
                    <input type="text" id="position" name="position" placeholder="Nhập chức vụ" required>
                    
                    <label for="contact">Số điện thoại hoặc Email</label>
                    <input type="text" id="contact" name="contact" placeholder="Nhập số điện thoại hoặc email" required>
                    
                    <label for="startdate">Ngày vào làm</label>
                    <input type="date" id="startdate" name="startdate" required>
                    
                    <label for="desc">Mô tả công việc</label>
                    <input type="text" id="desc" name="desc" placeholder="Nhập mô tả công việc">
                    
                    <br><br>
                    <button type="submit" id="submit">Thêm nhân sự</button>
                    <input type="reset" value="Làm mới" style="margin-left:12px;">
                    <input type="hidden" id="rowIndex">
                </form>
                <br>
                <h3>Danh sách nhân sự</h3>
                <table id="nhansu-table">
                    <tr>
                        <th>STT</th>
                        <th>Họ và tên</th>
                        <th>Ngày sinh</th>
                        <th>Chức vụ</th>
                        <th>Số đt/ Mail</th>
                        <th>Ngày vào làm</th>
                        <th>Mô tả công việc</th>
                        
                    </tr>
                </table>
            </div>
        </main>
        <script>
let stt = 1;

// Load dữ liệu khi mở trang
window.onload = function() {
  let data = JSON.parse(localStorage.getItem("nhansu")) || [];
  data.forEach((nhanSu, index) => {
    addRow(nhanSu, index + 1);
    stt = index + 2;
  });
};

// Thêm dòng vào bảng
function addRow(nhanSu, index) {
  const table = document.getElementById("nhansu-table");
  const newRow = table.insertRow(-1);

  newRow.insertCell(0).innerText = index;
  newRow.insertCell(1).innerText = nhanSu.name;
  newRow.insertCell(2).innerText = nhanSu.date;
  newRow.insertCell(3).innerText = nhanSu.position;
  newRow.insertCell(4).innerText = nhanSu.contact;
  newRow.insertCell(5).innerText = nhanSu.startdate;
  newRow.insertCell(6).innerText = nhanSu.desc;
  newRow.insertCell(7).innerHTML =
    `<button onclick="editRow(${index-1})">Sửa</button>
     <button onclick="deleteRow(${index-1})">Xóa</button>`;
}

// Xử lý thêm/cập nhật
document.getElementById("nhansu-form").addEventListener("submit", function(e) {
  e.preventDefault();

  const nhanSu = {
    name: document.getElementById("name").value,
    date: document.getElementById("date").value,
    position: document.getElementById("position").value,
    contact: document.getElementById("contact").value,
    startdate: document.getElementById("startdate").value,
    desc: document.getElementById("desc").value
  };

  let data = JSON.parse(localStorage.getItem("nhansu")) || [];
  const rowIndex = document.getElementById("rowIndex").value;

  if (rowIndex !== "") {
    data[rowIndex] = nhanSu; // cập nhật
    document.getElementById("rowIndex").value = "";
    document.getElementById("submitBtn").innerText = "Thêm nhân sự";
  } else {
    data.push(nhanSu); // thêm mới
  }

  localStorage.setItem("nhansu", JSON.stringify(data));
  refreshTable();
  this.reset();
});

// Sửa
function editRow(index) {
  let data = JSON.parse(localStorage.getItem("nhansu")) || [];
  const nhanSu = data[index];

  document.getElementById("name").value = nhanSu.name;
  document.getElementById("date").value = nhanSu.date;
  document.getElementById("position").value = nhanSu.position;
  document.getElementById("contact").value = nhanSu.contact;
  document.getElementById("startdate").value = nhanSu.startdate;
  document.getElementById("desc").value = nhanSu.desc;

  document.getElementById("rowIndex").value = index;
  document.getElementById("submitBtn").innerText = "Cập nhật";
}

// Xóa
function deleteRow(index) {
  let data = JSON.parse(localStorage.getItem("nhansu")) || [];
  data.splice(index, 1);
  localStorage.setItem("nhansu", JSON.stringify(data));
  refreshTable();
}

// Làm mới bảng
function refreshTable() {
  const table = document.getElementById("nhansu-table");
  // Xóa các dòng cũ (giữ lại dòng tiêu đề)
  while (table.rows.length > 1) {
    table.deleteRow(1);
  }
  let data = JSON.parse(localStorage.getItem("nhansu")) || [];
  data.forEach((nhanSu, index) => {
    addRow(nhanSu, index + 1);
  });
  stt = data.length + 1;
}
          </script> 
          </body> 

</html> 

